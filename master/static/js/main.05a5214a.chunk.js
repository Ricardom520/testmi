(this.webpackJsonpmaster=this.webpackJsonpmaster||[]).push([[0],{221:function(t,e,n){},413:function(t,e,n){},454:function(t,e,n){"use strict";n.r(e);var o=n(52),a=n(0),r=n.n(a),i=n(10),c=n.n(i),s=(n(221),n(34)),u=n.n(s),l=n(68),p=n(88),d=n(89),f=n(90),g=n(214),w=n(213),h=n(456),x=n(145),b=n(96),m=n.n(b),C=n(143),v=n.n(C);window.location.href.indexOf("bot.planplus.cn")>-1?m.a.defaults.baseURL="https://bot.planplus.cn":m.a.defaults.baseURL="https://botest.planplus.cn";var j=m.a.create({timeout:4e4,withCredentials:!1,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}});j.interceptors.request.use((function(t){if("post"===t.method){var e=v.a.stringify(t.data);t.data=e}else if("put"===t.method){var n=v.a.stringify(t.data);t.data=n}return t}),(function(t){return Promise.reject(t)})),j.interceptors.response.use((function(t){return t.data}),(function(t){return Promise.reject(t)}));var S=j;function y(t){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",S("/v1/api/weixin/getToken/xiaolantongxue?uri=".concat(e||window.location.href)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t){return A.apply(this,arguments)}function A(){return(A=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",S("/v1/api/weixin/getAgentTicket/xiaolantongxue?uri=".concat(e||window.location.href)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var I={SUBAPP_DETAIL:"http://192.168.197.150:10100"},E=n(206),M=Object(E.b)({}),T=n(207),_=Object(T.a)((function(t,e){switch(e.type){default:return t;case"test":return{test:1}}}));new(function(){function t(){Object(p.a)(this,t)}return Object(d.a)(t,[{key:"getTest",value:function(){return _.getTest()}},{key:"setTest",value:function(){_.dispatch({type:"test",payload:123423})}}]),t}()),n(413);console.log(I);var P=function(t){Object(g.a)(n,t);var e=Object(w.a)(n);function n(){var t;Object(p.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).initAuth=function(){x.a.loading("\u52a0\u8f7d\u4e2d...",0),localStorage.userId&&document.cookie.match("userId")?"1"===localStorage.isGetUserId?(console.log(window.location),localStorage.isGetUserId="0"):localStorage.userId&&(localStorage.removeItem("isGetUserId"),t.authConfig(t.props.shareConfig)):(window.location.href="https://bot.planplus.cn/v1/api/weixin/oauth2/xiaolantongxue?uri=http://127.0.0.1:8080/",localStorage.isGetUserId="1")},t.authConfig=function(){var e=Object(l.a)(u.a.mark((function e(n){var o,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(f.a)(t),e.next=4,y();case 4:return a=e.sent,e.next=7,k();case 7:r=e.sent,window.wx.config({beta:!0,debug:!1,appId:"ww0503560e67e7f9e6",timestamp:a.timestamp,nonceStr:a.nonceStr,signature:a.signature,jsApiList:["selectExternalContact","openUserProfile","getCurExternalContact","sendChatMessage","playVoice","downloadVoice","openDefaultBrowser","onMenuShareAppMessage"]}),window.wx.ready((function(){n&&window.wx.onMenuShareAppMessage(n),window.wx.agentConfig({corpid:"ww0503560e67e7f9e6",agentid:"1000011",timestamp:r.timestamp,nonceStr:r.nonceStr,signature:r.signature,jsApiList:["selectExternalContact","openUserProfile","getCurExternalContact","sendChatMessage","playVoice","downloadVoice","getCurExternalChat","onMenuShareWechat"],success:function(t){console.log(t),console.log("\u6210\u529f\u914d\u7f6econfigAgent"),window.wx.invoke("getCurExternalContact",{},(function(t){if(console.log("\u6388\u6743\u6210\u529f:"),console.log(t),console.log("getCurExternalContact-",t.err_msg,"getCurExternalContact:fail_without context of external contact"==t.err_msg),"getCurExternalContact:ok"==t.err_msg){var e=t.userId;M.setGlobalState({userId:e,kind:2})}else"getCurExternalContact:fail_without context of external contact"!=t.err_msg&&"getCurExternalContact:fail"!=t.err_msg||o.getCurExternalChat((function(t){M.setGlobalState({chatId:t,kind:1})}))}))}})})),window.wx.showOptionMenu(),window.wx.showAllNonBaseMenuItem(),x.a.hide();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(d.a)(n,[{key:"componentDidMount",value:function(){console.log(window.location),window.location.port?M.setGlobalState({userId:"wmh8DaCgAASVFww5tOAxeqK__a4hTeZw",kind:2}):this.initAuth(),M.onGlobalStateChange((function(t,e){console.log("\u4e3b\u5e94\u7528\u89c2\u5bdf\u8005\uff1atoken \u6539\u53d8\u524d\u7684\u503c\u4e3a ",e),console.log("\u4e3b\u5e94\u7528\u89c2\u5bdf\u8005\uff1a\u767b\u5f55\u72b6\u6001\u53d1\u751f\u6539\u53d8\uff0c\u6539\u53d8\u540e\u7684 token \u7684\u503c\u4e3a ",t)})),Object(h.b)([{name:"brokenSubApp",entry:I.SUBAPP_DETAIL,container:"#subapp-container",activeRule:"/qwDetail",props:{id:123}}]),Object(h.c)({prefetch:"all"})}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)("main",{id:"subapp-container"})})}}]),n}(r.a.Component),U=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,457)).then((function(e){var n=e.getCLS,o=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),o(t),a(t),r(t),i(t)}))};n(453);c.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(P,{})}),document.getElementById("root")),U()}},[[454,1,2]]]);
//# sourceMappingURL=main.05a5214a.chunk.js.map